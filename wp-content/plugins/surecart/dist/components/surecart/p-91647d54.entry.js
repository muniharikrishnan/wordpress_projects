import{r as t,c as e,h as i,F as s}from"./p-cc7ce8c7.js";import{s as r}from"./p-830ab1a3.js";import{z as n}from"./p-15e31471.js";const a=":host{display:block;z-index:3;position:relative}";const o=class{constructor(i){t(this,i);this.scChange=e(this,"scChange",7);this.scInput=e(this,"scInput",7);this.scInputType=e(this,"scInputType",7);this.scSetState=e(this,"scSetState",7);this.country=undefined;this.show=false;this.type="other";this.number=null;this.status="unknown";this.loading=undefined;this.help=undefined;this.otherLabel=wp.i18n.__("Tax ID","surecart");this.caGstLabel=wp.i18n.__("GST Number","surecart");this.auAbnLabel=wp.i18n.__("ABN Number","surecart");this.gbVatLabel=wp.i18n.__("UK VAT","surecart");this.euVatLabel=wp.i18n.__("EU VAT","surecart");this.taxIdTypes=[];this.required=false}async reportValidity(){return this.input.reportValidity()}onLabelChange(){n.ca_gst.label=this.caGstLabel||n.ca_gst.label;n.au_abn.label=this.auAbnLabel||n.au_abn.label;n.gb_vat.label=this.gbVatLabel||n.gb_vat.label;n.eu_vat.label=this.euVatLabel||n.eu_vat.label;n.other.label=this.otherLabel||n.other.label}componentWillLoad(){this.onLabelChange()}renderStatus(){if(this.status==="valid"){return i("sc-icon",{name:"check",slot:"prefix",style:{color:"var(--sc-color-success-500)"}})}if(this.status==="invalid"){return i("sc-icon",{name:"x",slot:"prefix",style:{color:"var(--sc-color-danger-500)"}})}}filteredZones(){if(!!this.taxIdTypes.length){return Object.keys(n).filter((t=>this.taxIdTypes.includes(t))).reduce(((t,e)=>{t[e]=n[e];return t}),{})}return n}onTaxIdTypesChange(){if(!!this.taxIdTypes.length){this.type=!this.taxIdTypes.includes("other")?this.taxIdTypes[0]:"other"}}getZoneLabel(){var t,e;const i=this.filteredZones()||{};return((t=i===null||i===void 0?void 0:i[(this===null||this===void 0?void 0:this.type)||"other"])===null||t===void 0?void 0:t.label)||((e=i===null||i===void 0?void 0:i[Object.keys(i)[0]])===null||e===void 0?void 0:e.label)}render(){var t,e,a,o,h;return i(s,null,i("sc-input",{name:"tax_identifier.number_type",required:this.required,value:this.type,style:{display:"none"}}),i("sc-input",{ref:t=>this.input=t,label:this.getZoneLabel(),"aria-label":wp.i18n.__("Tax ID","surecart"),placeholder:wp.i18n.__("Enter Tax ID","surecart"),name:"tax_identifier.number",value:this.number,onScInput:t=>{t.stopImmediatePropagation();this.scInput.emit({number:t.target.value,number_type:this.type||"other"})},onScChange:t=>{t.stopImmediatePropagation();this.scChange.emit({number:t.target.value,number_type:this.type||"other"})},help:this.help,required:this.required},this.loading&&this.type==="eu_vat"?i("sc-spinner",{slot:"prefix",style:{"--spinner-size":"10px"}}):this.renderStatus(),((t=Object.keys(this.filteredZones()||{}))===null||t===void 0?void 0:t.length)===1?i("span",{slot:"suffix"},(a=(e=Object.values(this.filteredZones()||{}))===null||e===void 0?void 0:e[0])===null||a===void 0?void 0:a["label_small"]):i("sc-dropdown",{slot:"suffix",position:"bottom-right",role:"select","aria-multiselectable":"false","aria-label":wp.i18n.__("Select number type","surecart")},i("sc-button",{type:"text",slot:"trigger",caret:true,loading:false,style:{color:"var(--sc-input-label-color)"},tabindex:"0"},(h=(o=this.filteredZones())===null||o===void 0?void 0:o[(this===null||this===void 0?void 0:this.type)||"other"])===null||h===void 0?void 0:h.label_small),i("sc-menu",null,Object.keys(this.filteredZones()||{}).map((t=>i("sc-menu-item",{role:"option",onClick:()=>{this.scInput.emit({number:this.number,number_type:t});this.scChange.emit({number:this.number,number_type:t});this.type=t},onKeyDown:e=>{var i;if(e.key==="Enter"){this.scInput.emit({number:this.number,number_type:t});this.scChange.emit({number:this.number,number_type:t});this.type=t;(i=this.input)===null||i===void 0?void 0:i.triggerFocus();r(wp.i18n.sprintf(wp.i18n.__("%s selected","surecart"),n[t].label_small,"assertive"))}},checked:this.type===t,"aria-selected":this.type===t?"true":"false","aria-label":n[t].label_small},n[t].label_small)))))))}static get watchers(){return{otherLabel:["onLabelChange"],caGstLabel:["onLabelChange"],auAbnLabel:["onLabelChange"],gbVatLabel:["onLabelChange"],euVatLabel:["onLabelChange"],taxIdTypes:["onTaxIdTypesChange"]}}};o.style=a;export{o as sc_tax_id_input};
//# sourceMappingURL=p-91647d54.entry.js.map