import{r as s,h as i,F as t}from"./p-cc7ce8c7.js";import{s as e,o as r}from"./p-24f06282.js";import{a as l}from"./p-a27e9b70.js";import{l as a,b as n}from"./p-ac8d2e48.js";import{c as o}from"./p-5ec5df35.js";import"./p-25433d0f.js";import"./p-f70181c4.js";import"./p-4d73f82a.js";import"./p-1c2e2695.js";import"./p-830ab1a3.js";import"./p-a3a138d6.js";import"./p-7ef0f71c.js";import"./p-50da3ba3.js";import"./p-c27fae79.js";import"./p-f9c1f513.js";import"./p-8266bbed.js";import"./p-18e45a13.js";const d=":host{display:block}.order-billing-address__toggle{margin-bottom:var(--sc-form-row-spacing, var(--sc-spacing-medium))}";const c=class{constructor(i){s(this,i);this.label=undefined;this.showName=undefined;this.namePlaceholder=wp.i18n.__("Name or Company Name","surecart");this.countryPlaceholder=wp.i18n.__("Country","surecart");this.cityPlaceholder=wp.i18n.__("City","surecart");this.line1Placeholder=wp.i18n.__("Address","surecart");this.line2Placeholder=wp.i18n.__("Address Line 2","surecart");this.postalCodePlaceholder=wp.i18n.__("Postal Code/Zip","surecart");this.statePlaceholder=wp.i18n.__("State/Province/Region","surecart");this.defaultCountry=undefined;this.toggleLabel=wp.i18n.__("Billing address is same as shipping","surecart");this.address={country:null,city:null,line_1:null,line_2:null,postal_code:null,state:null}}async reportValidity(){var s,i;if(!this.input)return true;return(i=(s=this.input)===null||s===void 0?void 0:s.reportValidity)===null||i===void 0?void 0:i.call(s)}prefillAddress(){var s;const i=Object.keys(this.address).filter((s=>s!=="country"));const t=i.filter((s=>!this.address[s]));if(t.length===i.length){this.address={...this.address,...(s=e.checkout)===null||s===void 0?void 0:s.billing_address}}}componentWillLoad(){if(this.defaultCountry&&!this.address.country){this.address.country=this.defaultCountry}this.prefillAddress();r("checkout",(()=>this.prefillAddress()))}async updateAddressState(s){var i,t;if(JSON.stringify(s)===JSON.stringify(this.address))return;this.address=s;try{a("billing-address");e.checkout=await o({id:(i=e===null||e===void 0?void 0:e.checkout)===null||i===void 0?void 0:i.id,data:{billing_matches_shipping:(t=e.checkout)===null||t===void 0?void 0:t.billing_matches_shipping,billing_address:this.address}})}catch(s){console.error(s)}finally{n("billing-address")}}async onToggleBillingMatchesShipping(s){e.checkout={...e.checkout,billing_matches_shipping:s.target.checked}}shippingAddressFieldExists(){return!!document.querySelector("sc-order-shipping-address")}render(){var s,r;return i(t,null,this.shippingAddressFieldExists()&&i("sc-checkbox",{class:"order-billing-address__toggle",onScChange:s=>this.onToggleBillingMatchesShipping(s),checked:(s=e.checkout)===null||s===void 0?void 0:s.billing_matches_shipping},this.toggleLabel),(!this.shippingAddressFieldExists()||!((r=e.checkout)===null||r===void 0?void 0:r.billing_matches_shipping))&&i("sc-address",{exportparts:"label, help-text, form-control, input__base, select__base, columns, search__base, menu__base",ref:s=>{this.input=s},label:this.label||wp.i18n.__("Billing Address","surecart"),placeholders:{name:this.namePlaceholder,country:this.countryPlaceholder,city:this.cityPlaceholder,line_1:this.line1Placeholder,line_2:this.line2Placeholder,postal_code:this.postalCodePlaceholder,state:this.statePlaceholder},names:{name:"billing_name",country:"billing_country",city:"billing_city",line_1:"billing_line_1",line_2:"billing_line_2",postal_code:"billing_postal_code",state:"billing_state"},required:true,loading:l(),address:this.address,"show-name":this.showName,onScChangeAddress:s=>this.updateAddressState(s.detail)}))}};c.style=d;export{c as sc_order_billing_address};
//# sourceMappingURL=p-8468fd6a.entry.js.map