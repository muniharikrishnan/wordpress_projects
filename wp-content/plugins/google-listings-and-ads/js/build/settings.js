"use strict";(self.webpackChunkgoogle_listings_and_ads=self.webpackChunkgoogle_listings_and_ads||[]).push([[571],{9438:function(e,t,n){n.d(t,{nL:function(){return g},V:function(){return d},MN:function(){return u},ZP:function(){return E}});var o=n(9307),a=n(5736),c=n(5609),l=n(591),s=n(965),i=n(8144),r=n(533);const d="all-accounts",g="ads-account",u="api-data-fetch-feature",m={[d]:{title:(0,a.__)("Disconnect all accounts","google-listings-and-ads"),confirmButton:(0,a.__)("Disconnect all accounts","google-listings-and-ads"),confirmation:(0,a.__)("Yes, I want to disconnect all my accounts.","google-listings-and-ads"),contents:[(0,a.__)("I understand that I am disconnecting any WordPress.com account, Google account, Google Merchant Center account and Google Ads account connected to this extension.","google-listings-and-ads"),(0,a.__)("Any active product listings will continue to show on Google. They can be managed, edited, or deleted manually from Google Merchant Center (merchants.google.com).","google-listings-and-ads"),(0,a.__)("Any ongoing paid campaigns will continue to run. They can be managed, edited, or deleted manually from Google Ads (ads.google.com).","google-listings-and-ads")]},[g]:{title:(0,a.__)("Disconnect Google Ads account","google-listings-and-ads"),confirmButton:(0,a.__)("Disconnect Google Ads Account","google-listings-and-ads"),confirmation:(0,a.__)("Yes, I want to disconnect my Google Ads account.","google-listings-and-ads"),contents:[(0,a.__)("I understand that I am disconnecting my Google Ads account from this WooCommerce extension.","google-listings-and-ads"),(0,a.__)("Any ongoing paid campaigns will continue to run. They can be managed, edited, or deleted manually from Google Ads (ads.google.com).","google-listings-and-ads"),(0,a.__)("Some configurations for Google Ads created through WooCommerce may be lost. This cannot be undone.","google-listings-and-ads")]},[u]:{title:(0,a.__)("Disable data fetching","google-listings-and-ads"),confirmButton:(0,a.__)("Disable data fetching","google-listings-and-ads"),confirmation:(0,a.__)("Yes, I want to disable the data fetching feature.","google-listings-and-ads"),contents:[(0,a.__)("I understand that I am disabling the data fetching feature from this WooCommerce extension.","google-listings-and-ads"),(0,a.__)("Any ongoing campaigns and configuration will continue to run. They will be pushed to Google as in the previous versions of this extension.","google-listings-and-ads")]}};function h(e){let{disconnectTarget:t,onRequestClose:n,onDisconnected:g,disconnectAction:u}=e;const[h,E]=(0,o.useState)(!1),[_,f]=(0,o.useState)(!1),p=(0,r.T)(),{title:y,confirmButton:Z,confirmation:A,contents:C}=m[t],b=()=>{_||n()};return(0,o.createElement)(l.Z,{className:"gla-disconnect-accounts-modal",title:(0,o.createElement)(o.Fragment,null,(0,o.createElement)(i.Z,{size:20}),y),isDismissible:!_,buttons:[(0,o.createElement)(s.Z,{key:"1",isSecondary:!0,disabled:_,onClick:b},(0,a.__)("Never mind","google-listings-and-ads")),(0,o.createElement)(s.Z,{key:"2",isPrimary:!0,isDestructive:!0,loading:_,disabled:!h,onClick:()=>{let e=t===d?p.disconnectAllAccounts:p.disconnectGoogleAdsAccount;u&&(e=u),f(!0),e().then((()=>{g(),n()})).catch((()=>{f(!1)}))}},Z)],onRequestClose:b},C.map(((e,t)=>(0,o.createElement)("p",{key:t},e))),(0,o.createElement)(c.CheckboxControl,{label:A,checked:h,disabled:_,onChange:E}))}function E(e){return(0,o.createElement)(h,e)}},9519:function(e,t,n){n.r(t),n.d(t,{default:function(){return re}});var o=n(9307),a=n(431),c=n(3108),l=n(3816),s=n(1969),i=n(4685),r=n(146),d=n(2295),g=n(5736),u=n(5609),m=n(2548),h=n(5004),E=n(6883),_=n(3497),f=n(965),p=n(1142),y=n(8300),Z=n(6313),A=n(5631),C=n(4127),b=n(9498),v=n(1693),G=n(7462);function w(e){return(0,o.createElement)(v.Z,(0,G.Z)({title:(0,g.__)("Linked accounts","google-listings-and-ads"),description:(0,g.__)("A WordPress.com account, Google account, and Google Merchant Center account are required to use this extension in WooCommerce.","google-listings-and-ads")},e))}var D=n(9438),k=n(1410);const{CONNECTED:N,INCOMPLETE:T}=c.GOOGLE_ADS_ACCOUNT_STATUS;function S(){const e=(0,m.Z)(),{jetpack:t}=(0,h.Z)(),{google:n}=(0,s.Z)(),{googleMCAccount:a}=(0,E.Z)(),{googleAdsAccount:c}=(0,_.Z)(),l=!(t&&n&&a&&c),i=[N,T].includes(c?.status),[d,G]=(0,o.useState)(null);return(0,o.createElement)(w,null,d&&(0,o.createElement)(D.ZP,{onRequestClose:()=>G(null),onDisconnected:()=>{(0,k.HR)("gla_disconnected_accounts",{context:d});const t=d===D.V?e+(0,r.vm)():window.location.href;window.location.href=t},disconnectTarget:d}),l?(0,o.createElement)(p.Z,null):(0,o.createElement)(y.Z,{size:"large"},(0,o.createElement)(Z.qq,{jetpack:t}),(0,o.createElement)(A.$,{googleAccount:n,hideAccountSwitch:!0}),(0,o.createElement)(C.Z,{googleMCAccount:a,hideAccountSwitch:!0}),i&&(0,o.createElement)(b.w,{googleAdsAccount:c,hideAccountSwitch:!0},(0,o.createElement)(v.Z.Card.Footer,null,(0,o.createElement)(f.Z,{isDestructive:!0,isLink:!0,onClick:()=>G(D.nL)},(0,g.__)("Disconnect Google Ads account only","google-listings-and-ads")))),(0,o.createElement)(u.Flex,{justify:"flex-end"},(0,o.createElement)(f.Z,{isPrimary:!0,isDestructive:!0,onClick:()=>G(D.V)},(0,g.__)("Disconnect from all accounts","google-listings-and-ads")))))}var I=n(1984),P=n(1941),x=n(279),L=n(9770),M=n(6483),O=n(2819),q=n(7018);let F=null;function W(){if(F)return;const e=(0,M.getQueryArgs)(document.location.search),t=t=>{const{target:n}=t;if("A"!==n.tagName)return;const o=[r.Dr.dashboard,r.Dr.reports,r.Dr.productFeed,r.Dr.settings],c=(0,M.getQueryArgs)(n.getAttribute("href"));if(o.includes(c.path)){t.stopPropagation(),t.preventDefault();const n=!(0,q.Z)()||c.path===r.Dr.settings,o=(0,M.getQueryArgs)(document.location.search);if(n&&!(0,O.isEqual)(e,o)){const{path:t,...n}=e;(0,a.getHistory)().push((0,a.getNewPath)(n,t,null))}}};document.defaultView.addEventListener("click",t,!0),document.body.classList.add("gla-reconnection-lock"),F=()=>{document.defaultView.removeEventListener("click",t,!0),document.body.classList.remove("gla-reconnection-lock")}}function B(){F&&(F(),F=null)}function H(){const{jetpack:e}=(0,h.Z)(),t="yes"===e?.active;return(0,o.useEffect)((()=>{t?((0,a.getHistory)().replace((0,r.ro)()),B()):W()}),[t]),e?(0,o.createElement)(w,null,(0,o.createElement)(y.Z,{size:"large"},(0,o.createElement)(L.Z,{className:"gla-wpcom-connection-lost-card",isBorderless:!0,size:"small",icon:(0,o.createElement)(I.Z,{icon:P.Z,size:24}),title:(0,g.__)("Your WordPress.com account has been disconnected.","google-listings-and-ads"),helper:(0,g.__)("Connect your WordPress.com account to ensure your products stay listed on Google. If you do not re-connect, your products can’t be automatically synced to Google, and any existing listings may be removed from Google.","google-listings-and-ads")}),(0,o.createElement)(Z.Oc,null))):(0,o.createElement)(x.Z,null)}var V=n(2807),j=n(2109),R=n(533);function Y(e){let{email:t}=e;const n=(0,m.Z)(),[c,l]=(0,o.useState)(null),{disconnectGoogleAccount:s}=(0,R.T)(),[i,r]=(0,o.useState)(!1);return(0,o.createElement)(L.Z,{appearance:L.O.GOOGLE,description:t},(0,o.createElement)(u.CardDivider,null),(0,o.createElement)(v.Z.Card.Body,null,(0,o.createElement)(u.Notice,{status:"error",isDismissible:!1},(0,o.createElement)("p",null,(0,o.createInterpolateElement)((0,g.__)("This Google account, <accountEmail />, was not the Google account previously connected to this integration.","google-listings-and-ads"),{accountEmail:(0,o.createElement)("strong",null,t)})),(0,o.createElement)("p",null,(0,g.__)("Thus, it doesn‘t have access to the Google Merchant Center and/or Google Ads account currently connected to this WooCommerce store.","google-listings-and-ads")),(0,o.createElement)("p",null,(0,g.__)("Try connecting with a different Google account, or completely disconnect all your connected accounts.","google-listings-and-ads")))),(0,o.createElement)(v.Z.Card.Footer,{justify:"flex-end"},c&&(0,o.createElement)(D.ZP,{onRequestClose:()=>l(null),onDisconnected:()=>{const e=(0,a.getNewPath)(null,"/google/start",null);window.location.href=n+e},disconnectTarget:c}),(0,o.createElement)(f.Z,{isSecondary:!0,isDestructive:!0,disabled:i,onClick:()=>l(D.V)},(0,g.__)("Disconnect all accounts","google-listings-and-ads")),(0,o.createElement)(f.Z,{isPrimary:!0,loading:i,onClick:()=>{r(!0),s().catch((()=>{r(!1)}))}},(0,g.__)("Try another Google account","google-listings-and-ads"))))}function z(){const{data:e}=(0,j.Z)("getGoogleAccountAccess"),t=(0,V.Z)(c.glaData.adsSetupComplete,e?.scope),n="yes"===e?.active,l=n?"no"===e?.merchant_access||"no"===e?.ads_access:void 0,s=n&&!l&&t.glaRequired;if((0,o.useEffect)((()=>{s?((0,a.getHistory)().replace((0,r.$9)()),B()):W()}),[s]),!e)return(0,o.createElement)(x.Z,null);if(!s){const t=l?(0,o.createElement)(Y,{email:e.email}):(0,o.createElement)(A.Z,null);return(0,o.createElement)(v.Z,{title:(0,g.__)("Connect account","google-listings-and-ads")},t)}return null}var Q=n(9959),U=n(2159),$=n(6025),J=n(741),K=n(8027),X=n(3438),ee=()=>{(0,Q.Z)("full-content");const{updateGoogleMCContactInformation:e}=(0,R.T)(),{data:t}=(0,U.Z)(),[n,c]=(0,o.useState)(!1),l=t.isAddressFilled&&t.isMCAddressDifferent;return(0,o.createElement)(o.Fragment,null,(0,o.createElement)($.Z,{title:(0,g.__)("Edit store address","google-listings-and-ads"),helpButton:(0,o.createElement)(J.Z,{eventContext:"edit-store-address"}),backHref:(0,r.ro)()}),(0,o.createElement)("div",{className:"gla-settings"},(0,o.createElement)(v.Z,{title:(0,g.__)("Store address","google-listings-and-ads"),description:(0,o.createElement)("div",null,(0,o.createElement)("p",null,(0,g.__)("Your store address is required by Google for verification purposes. It will be shared with the Google Merchant Center and will not be displayed to customers.","google-listings-and-ads")),(0,o.createElement)("p",null,(0,o.createElement)(K.Z,{context:"settings-store-address",linkId:"contact-information-read-more",href:"https://woocommerce.com/document/google-listings-and-ads/#contact-information"},(0,g.__)("Learn more","google-listings-and-ads"))))},(0,o.createElement)(X.Z,{showValidation:!t.isAddressFilled})),(0,o.createElement)(v.Z,null,(0,o.createElement)(u.Flex,{justify:"flex-end"},(0,o.createElement)(f.Z,{isPrimary:!0,loading:n,disabled:!l,eventName:"gla_contact_information_save_button_click",onClick:()=>{c(!0),e().then((()=>(0,a.getHistory)().push((0,r.ro)()))).catch((()=>c(!1)))}},(0,g.__)("Save details","google-listings-and-ads"))))))},te=n(2500),ne=n(7667),oe=n(699),ae=()=>{const e=(0,te.Z)();return(0,oe.Z)(e),(0,Q.Z)("full-content"),(0,o.createElement)(o.Fragment,null,(0,o.createElement)($.Z,{title:(0,g.__)("Edit phone number","google-listings-and-ads"),helpButton:(0,o.createElement)(J.Z,{eventContext:"edit-phone-number"}),backHref:(0,r.ro)()}),(0,o.createElement)("div",{className:"gla-settings"},(0,o.createElement)(v.Z,{title:(0,g.__)("Phone number","google-listings-and-ads"),description:(0,o.createElement)("div",null,(0,o.createElement)("p",null,(0,g.__)("Your phone number is required by Google for verification purposes. It will be shared with the Google Merchant Center and will not be displayed to customers.","google-listings-and-ads")),(0,o.createElement)("p",null,(0,o.createElement)(K.Z,{context:"settings-phone-number",linkId:"contact-information-read-more",href:"https://woocommerce.com/document/google-listings-and-ads/#contact-information"},(0,g.__)("Learn more","google-listings-and-ads"))))},(0,o.createElement)(ne.Z,{view:"settings",phoneNumber:e,initEditing:!0}))))},ce=n(5188),le=n(6439),se=n(4121);const ie="gla-settings";var re=()=>{const{subpath:e}=(0,a.getQuery)();(0,l.Z)(),(0,i.Z)();const{google:t}=(0,s.Z)(),n=e===r.h.reconnectGoogleAccount;switch((0,o.useEffect)((()=>{n||"no"!==t?.active||(0,a.getHistory)().replace((0,r.t)(c.L7.GOOGLE_DISCONNECTED))}),[n,t]),e){case r.h.reconnectWPComAccount:return(0,o.createElement)("div",{className:ie},(0,o.createElement)(H,null));case r.h.reconnectGoogleAccount:return(0,o.createElement)(z,null);case r.h.editPhoneNumber:return(0,o.createElement)(ae,null);case r.h.editStoreAddress:return(0,o.createElement)(ee,null)}return(0,o.createElement)("div",{className:ie},(0,o.createElement)(ce.Z,null),(0,o.createElement)(le.Z,null),(0,o.createElement)(se.Z,null),(0,o.createElement)(d._,null),(0,o.createElement)(S,null))}}}]);